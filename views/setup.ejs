<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
	<title><%= t('setup.title') %></title>
    <link rel="stylesheet" href="/styles.css" />
    <style>
        .field { margin: 12px 0; }
        .field label { display:block; margin-bottom:6px; font-weight:600; }
        .row { display:flex; gap:12px; align-items:end; }
    </style>
    <meta name="csrf-token" content="<%= csrfToken %>">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0f172a">
    <script>
        // small helper: default currency to user's locale suggestion if empty
        document.addEventListener('DOMContentLoaded', function() {
            var input = document.getElementById('currency');
            if (input && !input.value) {
                try {
                    var fmt = new Intl.NumberFormat(undefined, { style: 'currency', currency: 'USD' });
                    var opt = fmt.resolvedOptions();
                    if (opt.currency) input.value = opt.currency;
                } catch (e) {}
            }
        });
    </script>
    </head>
<body>
    <div class="container">
        <div class="card">
			<h1 class="title"><%= t('setup.title') %></h1>
			<p class="subtle"><%= t('setup.subtitle') %></p>
            <form action="/setup-workspace" method="post">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">

                <div class="field">
					<label for="weeklyBudget"><%= t('setup.weekly_budget') %></label>
                    <input id="weeklyBudget" name="weeklyBudget" type="number" step="0.01" inputmode="decimal" placeholder="0.00" value="<%= defaultWeekly %>" required />
                </div>

                <div class="field">
					<label for="currency"><%= t('setup.currency_code') %></label>
                    <input id="currency" name="currency" type="text" placeholder="USD" value="<%= defaultCurrency %>" required />
                </div>

				<div class="actions">
					<a class="btn secondary" href="/"><%= t('setup.cancel') %></a>
					<button class="btn" type="submit"><%= t('setup.create') %></button>
				</div>
            </form>
        </div>
    </div>
</body>
</html>


