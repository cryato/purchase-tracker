<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Weekly Details</title>
	<link rel="stylesheet" href="/styles.css" />
</head>
<body>
	<div class="container">
		<div class="card">
			<h1 class="title">This week</h1>
			<% if (days.length === 0) { %>
				<p class="subtle">No purchases made — week started!</p>
			<% } %>
			<% days.forEach(day => { %>
				<div style="display:flex; justify-content:space-between; align-items:center; margin:12px 0;">
					<div>
						<div style="font-weight:700"><%= day.dateStr %> (<%= day.dayName %>)</div>
						<div class="subtle">Total: <%= day.dayTotalFormatted %></div>
					</div>
				</div>
				<div style="display:grid; gap:8px;">
					<% day.items.forEach(item => { %>
						<div style="display:grid; grid-template-columns: 1fr auto auto; gap:8px; align-items:center; border:1px solid #334155; border-radius:10px; padding:10px;">
							<div>
								<div style="font-weight:600"><%= (item.amount).toFixed(2) %> <%= currencyCode %></div>
								<div class="subtle"><%= item.description || "—" %></div>
							</div>
							<a class="btn secondary" href="/edit/<%= item.id %>">Edit</a>
						<form action="/delete/<%= item.id %>" method="post" style="margin:0">
							<input type="hidden" name="_csrf" value="<%= csrfToken %>">
								<button class="btn" type="submit">Delete</button>
							</form>
						</div>
					<% }) %>
				</div>
				<hr style="border-color:#1f2937; margin:16px 0" />
			<% }) %>
			<div class="actions">
				<a class="btn secondary" href="/">Back</a>
				<a class="btn" href="/spend">Add spend</a>
			</div>
		</div>
	</div>
</body>
</html>

